[user]
  name = David Chen
  useConfigOnly = true

[core]
  commitGraph = true
  splitIndex = true
  untrackedCache = true
  excludesfile = ~/.gitignore
  pager = delta

[interactive]
  diffFilter = delta --color-only

[delta]
  # Use n and N to move between diff sections.
  navigate = true

  # Set to `true` to use light themes
  light = false

  # Show line numbers
  line-numbers = true

  # Enables side-by-side view
  side-by-side = true

  # Color overrides
  plus-style = syntax "#006000"
  plus-non-emph-style = syntax "#006000"
  plus-emph-style = bold syntax 52
  plus-empty-line-marker-style = normal "#006000"
  minus-emph-style = bold syntax 22


[merge]
  conflictstyle = diff3

[diff]
  colorMoved = default

[alias]
  # Show current branch name.
  branch-name = !git rev-parse --abbrev-ref HEAD

  # Overwrite the last commit, don't ask.
  cane = commit --amend --no-edit

  # Remove local branches that don't have a remote branch
  cleanup = !git branch -vv | grep 'origin.*gone]' | awk '{print $1}' | xargs git branch -D

  # TODO: Remove this once we're set on using `delta`
  # Run git diff using diff-so-fancy UI
  # df = "!df() { git diff $* | diff-so-fancy | less --tabs=4 -RFX; }; df"

  df = !git diff
  dfc = !git diff --cached

  # Show all files different from main
  dff = !git diff --name-only

  # Show all files different from main
  dfm = !git diff --name-only main...

  # Show the latest log
  last = log -1 HEAD

  # Show all modified and untracked files
  opened = !git ls-files --modified --others --exclude-standard

  # Publish branch upstream
  publish = !git push -u origin $(git branch-name)

  # Checkout a remote branch that isn't normally tracked, usually for review
  remote-fetch = "!rf() { git config --add remote.origin.fetch +refs/heads/$1:refs/remotes/origin/$1; git fetch origin +$1:refs/remotes/origin/$1; }; rf"
  remote-purge = "!rp() { git config --unset remote.origin.fetch \".*$1.*\"; git update-ref -d refs/remotes/origin/$1; }; rp"

  # Stage generated files
  ls-generated = !git ls-files --modified --others --exclude-standard | grep generated
  add-generated = !git ls-generated | xargs git add


[diff]
  tool = default-difftool
  noprefix = true

[difftool "default-difftool"]
  cmd = code --wait --diff $LOCAL $REMOTE

[gc]
  writeCommitGraph = true

[help]
  autoCorrect = 1

[color "diff-highlight"]
  oldNormal = red bold
  oldHighlight = red bold 52
  newNormal = green bold
  newHighlight = green bold 22

[color "diff"]
  meta = yellow
  frag = magenta bold
  commit = yellow bold
  old = red bold
  new = green bold
  whitespace = red reverse

[credential]
  helper = osxkeychain

[hub]
  host = git.corp.stripe.com
[init]
	defaultBranch = main
[push]
	autoSetupRemote = true
